<properties 
	pageTitle="資料流分析簡介 | Azure" 
	description="了解 Azure Stream Analytics" 
	services="stream-analytics" 
	documentationCenter="" 
	authors="jeffstokes72" 
	manager="paulettm" 
	editor="cgronlun"/>

<tags 
	ms.service="stream-analytics" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.tgt_pltfrm="na" 
	ms.workload="data-services" 
	ms.date="05/06/2015" 
	ms.author="jeffstok"/>


# Azure 資料流分析簡介

Azure 串流分析是完全受管理的服務，可用來對雲端中的串流資料進行低延遲、高可用性、可延展的複雜事件處理。


## Azure 串流分析簡介 (影片)

在這段[影片](http://azure.microsoft.com/documentation/videos/introduction-to-azure-stream-analytics-with-santosh-balasubramanian/)中，Santosh Balasubramanian 與 Scott Hanselman 將會簡介 Azure 串流分析。(持續時間：11:22)

> [AZURE.VIDEO introduction-to-azure-stream-analytics-with-santosh-balasubramanian]

## 動機和概觀

現今，大量的資料都需要透過網路高速流動。組織若能即時處理資料並採取相關動作，將可大幅改善效率，並在市場上脫穎而出。即時資料流分析的案例在各種產業都可看見：金融服務公司提供的個人化即時股票交易分析和警示、即時詐騙偵測、資料及身分識別保護服務、可靠地擷取和分析內嵌在實體物件 (物聯網，或 IoT) 中的感應器和傳動器所產生的資料、網頁點擊資料流分析，以及會在客戶於某個在時間範圍內遇到效能降低時發出警示的 (CRM) 應用程式。企業正尋求以最具彈性、可靠且符合成本效益的方式執行這類即時事件資料流資料分析，以在高度競爭的現代商務世界中獲致成功。

建置資料流處理系統是一項複雜的工作。相互關聯和彙總的串流作業不只需要有效地實作，也須具備可調整和容錯的能力。其他運作上的困難之處，還包括部署、偵錯和監視。建置和維護此類解決方案的相關成本正在快速上升。大型企業已選擇不再為自訂解決方案支付這麼高的成本，但小型公司卻常因進入門檻過高和昂貴成本而錯失機會。Azure 資料流分析可解決這些難題。

Azure 串流分析是完全受管理、以 Microsoft Azure 託管的即時資料流運算服務。對資料流提供恢復力強、低延遲及可延展的複雜事件處理。其可讓開發人員結合資料流與歷史記錄或參考資料，以輕鬆而快速地衍生商業情資。

在 Azure 入口網站中按幾下滑鼠，客戶即可使用類似 SQL 的語言撰寫串流工作，以指定轉換和監視其整體串流管線的延展性/速度。服務可以輕鬆地從每秒處理幾 KB 的事件調整為 1 GB 或更多。市面上其他的串流解決方案大多需要客戶撰寫複雜的自訂程式碼，但有了 Azure 資料流分析後，客戶將可撰寫簡單、宣告式且熟悉的 SQL。

Azure 串流分析提供多種運算子，從簡單的篩選器到複雜的相互關聯。定義以時間為準的時間範圍作業 (例如時間範圍式彙總) 或相互關聯多個資料流來偵測模式 (例如序列)，或甚至比較目前的條件與歷史值和模型，都可透過一組簡單的類 SQL 串流分析查詢語言運算子在幾分鐘內完成。要指定串流管線，只需設定其輸入和輸出，並提供說明所需轉換的類 SQL 查詢即可。這足以因應大部分簡單案例的需求，但更大規模和更複雜的案例也可從串流分析設定功能中獲益。使用者可管線的每個步驟所需專用的計算能力，以達到所需的尖峰輸送量。

Azure 串流分析目前直接連接到 Azure 事件中樞進行資料流擷取，並連接到 Azure Blob 服務以取得歷史資料。使用 Azure 事件中樞的輸入和輸出介面範圍，可讓您輕鬆地將 Azure 串流分析與其他資料來源和處理引擎整合，而不會失去計算的串流本質。資料可從串流分析寫入至 Azure 儲存體，進而處理為一系列的事件，或透過 Azure HDInsight 用於其他形式的批次分析。Azure 串流分析利用多年的 Microsoft Research 工作成果開發用於時效性處理的高調整性串流引擎，以及這類直覺式規格的語言整合功能。Azure 串流分析依其建置採用 Hadoop、YARN 和 REEF 的開放原始碼社群進行橫向擴充處理。


## 主要功能

### 容易使用
資料流分析用來說明轉換的簡單、宣告式查詢模型。為了最佳化使用性，選擇以 SQL Variant 做為網域特定語言 (DSL)，而且我們的串流系統基礎結構無須讓客戶面臨太多技術上的複雜性。使用串流分析查詢語言，可讓您快速而輕鬆地實作暫時函數，包括以時間為基礎的聯結、時間範圍式彙總、暫時性篩選器，以及其他常見作業，例如聯結、彙總、預測及篩選器等。

雖然我們以可讓 SQL 使用者直覺操作的方式擴充 SQL 的語意，但我們仍保持在標準 SQL 語法的範疇內，以加快實作速度和提高工具使用性。如需查詢語言的詳細資訊，請參閱「後續步驟」一節。

### 延展性
資料流分析能夠處理高達 1 GB/秒的高事件輸送量。與 Azure 事件中樞整合，可讓解決方案每秒擷取數百萬來自連線裝置、點擊資料流及記錄檔等項目的事件。為達到此目的，我們運用事件中樞資料分割功能，每個資料分割可產生 1 MB/秒。串流分析不僅支援資料分割，也可同時在水平軸及垂直軸處理這些擷取的事件。使用者可將計算分割成查詢定義內的數個邏輯步驟，且每個步驟都能夠進一步分割成資料平行執行元素。串流分析會隨著時間根據事件擷取率、處理的複雜性和預期的延遲進行自動調整，讓使用者能夠適當地自訂其工作負載。如需實作延展性的深入詳細資訊，請參閱「後續步驟」一節中的連結。

### 可靠性、可重複性及快速修復
串流分析可透過其內建修復和檢查點功能，協助防止在節點失敗時遺失資料並提供營運持續性。這些是由串流分析的用戶端錨點模型架構所提供的功能。此服務可維持狀態，以最佳化節點失敗後的繼續運作、重新計算及快取輸出，以有效呈現下游的失敗。

此服務具備內部維護狀態的能力，因此能夠提供可重複的結果，用以封存事件並在日後重新套用處理，而取得相同的結果。這項功能可讓客戶回頭檢視並調查根本原因分析和假設狀況分析等案例的計算方式。這些功能的組合可針對處理節點失敗提供快速修復功能，快速地重新處理遺失的狀態。

### 低延遲性
資料流分析目前已針對次秒範圍內可觀察到的端對端延遲進行最佳化。這可讓系統持續處理高輸送量。通訊模型是以提取為基礎且可調整的批次處理模型，根據已設定的逾時和大小限制運作。因此，事件和其他記錄都會批次處理，直到達到限制為止。即使輸送量偏高，系統仍能提供低延遲性。

### 參考資料
資料流分析可讓使用者指定及使用參考資料。這可能是歷史資料，或變動頻率較低的資料。系統可以簡化參考資料的使用，使資料被視為任何其他要與即時擷取的其他事件資料流聯結以執行轉換的傳入事件資料流。如需有關參考資料之建構和使用方式的詳細資訊，請參閱「後續步驟」一節。



## 選擇 Azure 串流分析的商業動機

### 低成本
串流分析服務已最佳化，而可讓使用者以低廉的成本取得並維護即時分析解決方案。此服務可讓您根據使用量付費。使用量衍生自處理的事件數量，以及在叢集內佈建用以處理個別串流工作的計算能力。

### 快速實作
使用串流分析，您將可直接擁有可高度擴充的即時事件處理解決方案，而無需硬體或其他前置成本，也不需費時安裝或設定。Azure 會為您將一切處理妥當。您只要透過 Azure 入口網站訂閱服務，即可在短短幾分鐘內啟動並執行。入口網站中好用的使用者介面會透過逐步快速入門指南引導您完成輸入來源的設定和測試，以及設定和測試輸出存放區。簡易查詢編輯器提供自動完成和建議功能。

### 快速開發
串流分析可協助您降低在針對橫向擴充分散式系統開發分析功能時所面臨的複雜性。開發人員只需以 SQL 架構查詢語言描述其所需的轉換，系統即會自動分散工作負載，以達到擴充、效能與恢復能力，而免除掉大部分的串處理解決方案中所需的程序性程式設計工作。透過內建功能以及使用者親和入口網站的運用，串流分析高層級的開發人員得以快速而輕鬆地進行即時處理，而不必擔心基礎結構採購、持續性維護及擴充等事宜。

## 情況和使用案例

### 即時分析物聯網
隨著裝置漸趨智慧型，並且有愈來愈多裝置具有內建通訊功能，人們對於這些裝置所產生和收集到的資料能夠造就哪些運用的期待，在商業和消費者領域都在持續擴大中。一般人會預期，既然有這麼多可用資料，我們應可快速結合和處理資料，而更深入了解我們的週遭環境，以及我們經常使用的裝置。我們可透過自動販賣機的例子來說明標準的 IoT 案例。

自動販賣機器會定期將產品存貨、狀態、溫度等資料傳送至領域閘道 (如果販賣不具備 IP 功能) 或雲端閘道 (如果具備 IP 功能)，以擷取系統中的資料。內送資料流會進行處理和轉換，使計算輸出可以透過閘道立即送回裝置，以採取相對應的行動。例如，如果機器過熱，則裝置可能需要自行重新開機，或自動執行韌體升級，而不需要人為介入。已處理的輸出也會觸發其他警示和通知，以根據事件自動排定技術人員進行處理。

隨著收集和處理的資料愈來愈多，「機器學習」也可用來從系統中發現的模式進行開發和學習。例如，這或許能夠根據送回系統的即時事件資料流預測機器何時需要處理，或是在即將發生問題時依據技術人員的路線排定預防性的維修。

這種由裝置將資訊傳送至處理系統、甚至根據即時的處理結果採取因應措施的模式，在 IoT 使用案例中隨處可見。其他類似的案例還包括連線的汽車、點擊資料流分析及設備管理。若要最佳化這種意見反饋能力以達到低延遲及高輸送量，我們可以使用串流分析來擷取 Azure 事件中樞的資料，處理資料並隨即將資料傳回各個訂閱裝置的事件中樞，以採取適當動作。


![Azure 串流分析即時分析物聯網 (IoT)][img.stream.analytics.scenario1]


### 透過儀表板的遙測及記錄分析
隨著裝置、機器及應用程式數量日漸增加，企業營運的常見使用案例，是需要藉由建立全面而幾近即時的分析功能，來監視及回應不斷變動的商業需求。標準的遙測/記錄分析案例可透過線上服務或應用程式的例子來說明，不過這種模式在各種需要收集和報告應用程式或裝置遙測的產業中，都很常見。

應用程式或服務會定期收集健全狀況資料。代表應用程式或基礎結構在某個點之現行狀態的資料、使用者要求記錄，以及代表在應用程式中執行之動作或活動的資料，都會被收集。資料過去儲存在 Blob 或其他類型的資料存放區中，以供進一步處理。

而近來的趨勢是即時呈現於儀表板，因此除了將資料儲存至 Blob 或其他類型的存放區以進行歷史分析以外，客戶也期待能直接處理及轉換傳入的資料流，使其能夠在需要加以因應時，以儀表板和 (或) 通知的形式立即提供給使用者。例如，如果服務網站當機，即可通知作業人員開始調查和快速解決問題。在幾個這類的使用案例中，人們通常會監視根據更新的資料集而建置的即時儀表板，而這些資料集是透過資料流分析在擷取的資料完成處理後所更新的。
 
![透過儀表板的 Azure 串流分析遙測與記錄分析][img.stream.analytics.scenario2]

### 封存事件以供後續處理
希望企業能夠快速靈活地營運的期待持續成長。企業和開發人員現在都選擇以方便使用的雲端架構平台來因應更高靈活性的需求，並持續尋找能夠讓他們對其系統所產生的持續性資料流，以幾近即時的方式進行擷取和處理。現在，這些客戶都未能利用針對低延遲寫入至資料存放區而最佳化的服務，因此最後失去數個可能潛藏重要業務情資的關鍵資料集。標準的事件封存器案例說明如下：

分散於世界各地的各種裝置和平台所產生資料，被發送至集中式的資料收集器。當資料送達中央位置後，即會執行某些無狀態的轉換，例如清除個人識別資訊資訊、新增地理標記以及執行 IP 查閱。已轉換的資料接著會以可立即供 HDInsight 或其他工具取用以進行離線處理的方式，封存到 Blob 儲存體。

![Azure 串流分析封存事件以供後續處理][img.stream.analytics.scenario3]
 
## 取得說明
如需進一步的協助，請參閱我們的 [Azure Stream Analytics 論壇](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics)

## 後續步驟

- [Azure Stream Analytics 介紹](stream-analytics-introduction.md)
- [開始使用 Azure Stream Analytics](stream-analytics-get-started.md)
- [調整 Azure Stream Analytics 工作](stream-analytics-scale-jobs.md)
- [Azure Stream Analytics 查詢語言參考](https://msdn.microsoft.com/library/azure/dn834998.aspx)
- [Azure Stream Analytics 管理 REST API 參考](https://msdn.microsoft.com/library/azure/dn835031.aspx)


<!--Image references-->
[img.stream.analytics.scenario1]: ./media/stream-analytics-introduction/Introduction-to-Azure-Stream-Analytics_01.png
[img.stream.analytics.scenario2]: ./media/stream-analytics-introduction/Introduction-to-Azure-Stream-Analytics_02.png
[img.stream.analytics.scenario3]: ./media/stream-analytics-introduction/Introduction-to-Azure-Stream-Analytics_03.png


<!--Link references-->
[stream.analytics.developer.guide]: ../stream-analytics-developer-guide.md
[stream.analytics.scale.jobs]: stream-analytics-scale-jobs.md
[stream.analytics.limitations]: ../stream-analytics-limitations.md
[stream.analytics.introduction]: stream-analytics-introduction.md
[stream.analytics.get.started]: stream-analytics-get-started.md
[stream.analytics.query.language.reference]: http://go.microsoft.com/fwlink/?LinkID=513299
[stream.analytics.rest.api.reference]: http://go.microsoft.com/fwlink/?LinkId=517301

<!--HONumber=54--> 