<properties 
	pageTitle="使用網路組態檔設定虛擬網路" 
	description="將網路組態檔匯出和匯入至 Azure 管理入口網站以建立或修改虛擬網路的指示。" 
	services="virtual-network" 
	documentationCenter="" 
	authors="cherylmc" 
	manager="adinah" 
	editor="tysonn"/>

<tags
	ms.service="virtual-network"
	ms.devlang="na"
	ms.topic="article"
	ms.tgt_pltfrm="na"
	ms.workload="infrastructure-services" 
	ms.date="07/09/2015"
	ms.author="cherylmc"/>

# 使用網路組態檔設定虛擬網路

## 概觀

若要設定虛擬網路，可以使用管理入口網站精靈，也可以建立並匯入網路組態檔。Azure 會使用網路組態檔定義您的虛擬網路設定。

您可能偏好使用管理入口網站精靈開始建立虛擬網路組態，然後直接編輯該組態檔以進行後續變更。例如，如果您要設定個別訂閱的多個虛擬網路，您可能會想要先使用管理入口網站精靈建立網路組態檔。您可以接著匯出該檔案做為範本，並編輯該檔案以指定不同的設定，然後將該檔案重新匯入到管理入口網站。您有多個訂閱時，這可以有效建立多個虛擬網路。

或者，如果您想要先變更網路組態設定，然後將雲端服務或虛擬機器部署到網路，可以匯出檔案並進行編輯，然後將檔案重新匯入到 Azure。如果您想要重新建立虛擬網路，也可以使用網路組態檔來備份您的網路組態設定。

## 建立和修改網路設定檔 
若要撰寫網路組態檔，最簡單的方式是從現有的虛擬網路組態匯出網路設定，然後修改檔案，以包含設定虛擬網路所需的設定。您也可以取得範例檔案並進行修改。

若要編輯網路組態檔，您可以直接開啟該檔案，並進行適當的變更，然後儲存檔案。您可以使用任何 *xml* 編輯器來變更網路組態檔。

您應該確實遵循網路組態檔結構描述設定的指引。您撰寫網路組態檔時，檔案中的設定將覆寫該訂閱目前在 Azure 中的設定。如果您在檔案中變更與設定指引不相容的值，可能無法按照您預期的方式設定虛擬網路，而且，在某些情況下，Azure 將不允許您匯入檔案。如需網路組態檔所包含之特定設定的相關資訊，請參閱 [Azure 虛擬網路組態結構描述](https://msdn.microsoft.com/library/azure/jj157100.aspx)。

Azure 會將已部署的子網路視為「使用中」。使用中的子網路無法加以修改。在修改之前，請將已部署到不同子網路的任何內容移到不修改的子網路。請參閱[將 VM 或角色執行個體移至不同的子網路](virtual-networks-move-vm-role-to-subnet.md)。



## 使用管理入口網站匯出和匯入虛擬網路設定  
您可以使用 PowerShell 或管理入口網站匯入和匯出網路組態檔中包含的網路組態設定。下列指示將協助您使用管理入口網站匯出和匯入。

### 若要匯出網路設定
匯出時，訂閱中虛擬網路所有的設定將寫入至 .xml 檔。

1. 登入**管理入口網站**。
2. 在管理入口網站的 [網路] 頁面底部，按一下 [匯出]。 
3. 在 [匯出網路組態] 視窗中，確認您已選取要匯出網路設定的訂用帳戶。然後，按一下右下方的核取記號。 
4. 當提示出現時，將 *NetworkConfig.xml* 檔案儲存到您選擇的位置。


### 若要匯入網路設定

1. 在**管理入口網站**左下方的導覽窗格中，按一下 [新增]。
2. 按一下 [網路服務] -> [虛擬網路] -> [匯入組態]。
3. 在 [匯入網路組態檔] 頁面上，瀏覽至您的網路組態檔，然後按 [下一步] 箭號。
4. 在 [建置您的網路] 頁面上，您會看見畫面上的資訊顯示將變更或建立的網路組態區段。如果變更正確無誤，請按一下核取記號繼續更新或建立虛擬網路。 


## 後續步驟
如需虛擬網路設定的詳細資訊，請參閱：

-  [網路組態結構描述 - 雲端服務的選擇性設定](https://msdn.microsoft.com/library/azure/jj156091.aspx)
-  [關於管理入口網站中的虛擬網路設定](https://msdn.microsoft.com/library/azure/jj156074.aspx)
-  [虛擬網路常見問題集](https://msdn.microsoft.com/library/azure/dn133803.aspx)





 

<!---HONumber=July15_HO2-->