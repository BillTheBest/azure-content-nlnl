<properties 
   pageTitle="SQL Database 嚴重損壞修復演練" 
   description="了解使用 Azure SQL Database 執行嚴重損壞修復演練的指引和最佳作法，以協助確保您的關鍵性商務應用程式在失敗和中斷時可迅速復原。" 
   services="sql-database" 
   documentationCenter="" 
   authors="mihaelablendea" 
   manager="jeffreyg" 
   editor="monicar"/>

<tags
   ms.service="sql-database"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-management" 
   ms.date="04/13/2015"
   ms.author="mihaelab"/>

#執行嚴重損壞修復演練

建議您定期驗證應用程式的復原工作流程整備。最佳設計作法是，驗證容錯移轉所涉及之資料遺失和 (或) 中斷的應用程式行為和影響。這也是大多數業界標準在業務續航力認證中的規定。

嚴重損壞修復演練內容包括：

- 模擬資料層中斷情況
- 復原 
- 驗證復原後的應用程式完整性

執行演練的工作流程會因您[設計業務續航力](sql-database-business-continuity.md)的方式而異。以下將說明在 Azure SQL Database 的內容中進行嚴重損壞修復演練的最佳作法。

##異地還原

為了避免在進行嚴重損壞修復演練時可能遺失資料，建議您使用測試環境來執行演練，方法是建立生產環境的複本，然後使用這個複本來驗證應用程式的容錯移轉工作流程。
 
####中斷模擬

- 藉由刪除或重新命名來源資料庫來模擬中斷情況，使應用程式連接失敗。如此一來，您便可驗證中斷偵測/警示，並測量復原持續時間的 RTO。

####復原

- 如[此處](sql-database-disaster-recovery.md)所述，將資料庫異地還原至其他伺服器。 
- 變更應用程式組態以連接到復原的資料庫，並遵循[完成復原的資料庫](sql-database-recovered-finalize.md)指南完成復原。

####驗證

- 驗證復原後的應用程式完整性 (例如連接字串、登入、基本功能測試或標準應用程式登出程序的其他驗證部分)，完成演練。

##標準異地複寫

使用標準異地複寫保護的資料庫只能有一個不可讀取的次要資料庫。演練內容需要強制終止連結，此時資料庫會處於未受保護的狀態。此外，還有可能造成資料遺失，因此不建議客戶在實際資料庫上執行這類測試。建議您改為建立生產環境的複本，然後使用這個複本來驗證應用程式的容錯移轉工作流程。

####中斷模擬

- 模擬主要資料庫上的工作負載。如果主要資料庫在因資料遺失而終止時處於作用中狀態，將使演練更為逼真。
- 刪除主要資料庫，或對次要資料庫端的連結[執行強制終止](sql-database-disaster-recovery.md)。

####復原

- 變更應用程式組態以連接到先前的唯讀次要資料庫，這個資料庫之後將變成可完全存取，而且應用程式會使用這個資料庫做為新的主要資料庫。 
- 遵循[完成復原的資料庫](sql-database-recovered-finalize.md)指南完成復原。

####驗證

- 驗證復原後的應用程式完整性 (例如連接字串、登入、基本功能測試或標準應用程式登出程序的其他驗證部分)，完成演練。

##主動式異地複寫

這個嚴重損壞修復演練的進行方式，是使用平行目標伺服器，並在其中建立另一組唯讀的次要資料庫。您應該使用測試版的應用程式層，在強制終止之後對該伺服器執行測試，以驗證作業健全狀況和資料完整性。

####中斷模擬

- [建立從主要資料庫到次要測試伺服器的新主動式異地複寫連結](sql-database-business-continuity-design.md)。如果主要資料庫在因資料遺失而終止時處於作用中狀態，將使演練更為逼真。
- 對位於測試資料庫之次要資料庫上的連結[執行強制終止](sql-database-disaster-recovery.md)。

####復原

- 變更應用程式組態以連接到先前的唯讀次要資料庫，在終止後，這個資料庫將變成可以寫入。
- 遵循[完成復原的資料庫](sql-database-recovered-finalize.md)指南完成復原。

####驗證

- 驗證復原後的應用程式完整性 (例如連接字串、登入、基本功能測試或標準應用程式登出程序的其他驗證部分)，完成演練。

 

<!---HONumber=July15_HO2-->